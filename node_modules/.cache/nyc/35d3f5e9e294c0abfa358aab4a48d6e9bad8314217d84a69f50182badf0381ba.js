var cov_34lqdmjth=function(){var path="/home/lenovo/nodefiles2/FHIR-Converter-master/src/e2e-test/rule-test/util/test-rule-functions.js";var hash="00b3fa7ee3ceba44c35e18c0891cc3361a7d7547";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/home/lenovo/nodefiles2/FHIR-Converter-master/src/e2e-test/rule-test/util/test-rule-functions.js",statementMap:{"0":{start:{line:6,column:16},end:{line:6,column:34}},"1":{start:{line:7,column:17},end:{line:7,column:32}},"2":{start:{line:8,column:11},end:{line:8,column:32}},"3":{start:{line:10,column:15},end:{line:12,column:1}},"4":{start:{line:11,column:4},end:{line:11,column:51}},"5":{start:{line:14,column:24},end:{line:19,column:1}},"6":{start:{line:15,column:17},end:{line:15,column:39}},"7":{start:{line:16,column:4},end:{line:17,column:67}},"8":{start:{line:17,column:8},end:{line:17,column:67}},"9":{start:{line:18,column:4},end:{line:18,column:26}},"10":{start:{line:21,column:17},end:{line:28,column:1}},"11":{start:{line:22,column:20},end:{line:22,column:80}},"12":{start:{line:23,column:23},end:{line:23,column:69}},"13":{start:{line:24,column:4},end:{line:27,column:30}},"14":{start:{line:25,column:8},end:{line:25,column:93}},"15":{start:{line:27,column:8},end:{line:27,column:30}},"16":{start:{line:30,column:20},end:{line:37,column:1}},"17":{start:{line:31,column:14},end:{line:31,column:64}},"18":{start:{line:32,column:27},end:{line:32,column:80}},"19":{start:{line:33,column:4},end:{line:36,column:30}},"20":{start:{line:34,column:8},end:{line:34,column:120}},"21":{start:{line:36,column:8},end:{line:36,column:30}},"22":{start:{line:39,column:17},end:{line:50,column:1}},"23":{start:{line:40,column:20},end:{line:40,column:67}},"24":{start:{line:41,column:14},end:{line:41,column:16}},"25":{start:{line:42,column:4},end:{line:44,column:5}},"26":{start:{line:43,column:8},end:{line:43,column:76}},"27":{start:{line:45,column:21},end:{line:45,column:50}},"28":{start:{line:46,column:4},end:{line:49,column:30}},"29":{start:{line:47,column:8},end:{line:47,column:101}},"30":{start:{line:49,column:8},end:{line:49,column:30}},"31":{start:{line:52,column:0},end:{line:57,column:2}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:10,column:15},end:{line:10,column:16}},loc:{start:{line:10,column:43},end:{line:12,column:1}},line:10},"1":{name:"(anonymous_1)",decl:{start:{line:14,column:24},end:{line:14,column:25}},loc:{start:{line:14,column:41},end:{line:19,column:1}},line:14},"2":{name:"(anonymous_2)",decl:{start:{line:21,column:17},end:{line:21,column:18}},loc:{start:{line:21,column:34},end:{line:28,column:1}},line:21},"3":{name:"(anonymous_3)",decl:{start:{line:30,column:20},end:{line:30,column:21}},loc:{start:{line:30,column:37},end:{line:37,column:1}},line:30},"4":{name:"(anonymous_4)",decl:{start:{line:39,column:17},end:{line:39,column:18}},loc:{start:{line:39,column:34},end:{line:50,column:1}},line:39}},branchMap:{"0":{loc:{start:{line:10,column:32},end:{line:10,column:42}},type:"default-arg",locations:[{start:{line:10,column:40},end:{line:10,column:42}}],line:10},"1":{loc:{start:{line:16,column:4},end:{line:17,column:67}},type:"if",locations:[{start:{line:16,column:4},end:{line:17,column:67}},{start:{line:16,column:4},end:{line:17,column:67}}],line:16},"2":{loc:{start:{line:24,column:4},end:{line:27,column:30}},type:"if",locations:[{start:{line:24,column:4},end:{line:27,column:30}},{start:{line:24,column:4},end:{line:27,column:30}}],line:24},"3":{loc:{start:{line:33,column:4},end:{line:36,column:30}},type:"if",locations:[{start:{line:33,column:4},end:{line:36,column:30}},{start:{line:33,column:4},end:{line:36,column:30}}],line:33},"4":{loc:{start:{line:46,column:4},end:{line:49,column:30}},type:"if",locations:[{start:{line:46,column:4},end:{line:49,column:30}},{start:{line:46,column:4},end:{line:49,column:30}}],line:46}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0},b:{"0":[0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0]},_coverageSchema:"43e27e138ebf9cfc5966b082cf9a028302ed4184",hash:"00b3fa7ee3ceba44c35e18c0891cc3361a7d7547"};var coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}return coverage[path]=coverageData;}();// -------------------------------------------------------------------------------------------------
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License (MIT). See LICENSE in the repo root for license information.
// -------------------------------------------------------------------------------------------------
var testUtils=(cov_34lqdmjth.s[0]++,require('./utils'));var fhirModule=(cov_34lqdmjth.s[1]++,require('fhir'));var fhir=(cov_34lqdmjth.s[2]++,new fhirModule.Fhir());cov_34lqdmjth.s[3]++;var response=function(status,message=(cov_34lqdmjth.b[0][0]++,'')){cov_34lqdmjth.f[0]++;cov_34lqdmjth.s[4]++;return{valid:status,errorMessage:message};};cov_34lqdmjth.s[5]++;var fhirR4Validation=function(resJson){cov_34lqdmjth.f[1]++;var result=(cov_34lqdmjth.s[6]++,fhir.validate(resJson));cov_34lqdmjth.s[7]++;if(!result.valid){cov_34lqdmjth.b[1][0]++;cov_34lqdmjth.s[8]++;return response(false,JSON.stringify(result,null,"\t"));}else{cov_34lqdmjth.b[1][1]++;}cov_34lqdmjth.s[9]++;return response(true);};cov_34lqdmjth.s[10]++;var onePatient=function(resJson){cov_34lqdmjth.f[2]++;var resources=(cov_34lqdmjth.s[11]++,fhir.evaluate(resJson,'Bundle.entry.resource.resourceType'));var patientCount=(cov_34lqdmjth.s[12]++,testUtils.countOccurences(resources,'Patient'));cov_34lqdmjth.s[13]++;if(patientCount!==1){cov_34lqdmjth.b[2][0]++;cov_34lqdmjth.s[14]++;return response(false,'The bundle contains '+patientCount+' Patient resources');}else{cov_34lqdmjth.b[2][1]++;cov_34lqdmjth.s[15]++;return response(true);}};cov_34lqdmjth.s[16]++;var noDefaultGuid=function(resJson){cov_34lqdmjth.f[3]++;var ids=(cov_34lqdmjth.s[17]++,fhir.evaluate(resJson,'Bundle.entry.resource.id'));var defaultGuidCount=(cov_34lqdmjth.s[18]++,testUtils.countOccurences(ids,testUtils.defaultGuid));cov_34lqdmjth.s[19]++;if(defaultGuidCount>=1){cov_34lqdmjth.b[3][0]++;cov_34lqdmjth.s[20]++;return response(false,'The bundle contains '+defaultGuidCount+' default Guid(s) '+testUtils.defaultGuid);}else{cov_34lqdmjth.b[3][1]++;cov_34lqdmjth.s[21]++;return response(true);}};cov_34lqdmjth.s[22]++;var noSameGuid=function(resJson){cov_34lqdmjth.f[4]++;var resources=(cov_34lqdmjth.s[23]++,fhir.evaluate(resJson,'Bundle.entry.resource'));var ids=(cov_34lqdmjth.s[24]++,[]);cov_34lqdmjth.s[25]++;for(var index in resources){cov_34lqdmjth.s[26]++;ids.push(resources[index].resourceType+'/'+resources[index].id);}var duplicates=(cov_34lqdmjth.s[27]++,testUtils.findDuplicates(ids));cov_34lqdmjth.s[28]++;if(duplicates.length!==0){cov_34lqdmjth.b[4][0]++;cov_34lqdmjth.s[29]++;return response(false,'The bundle contains some duplicate Guids: '+duplicates.toString());}else{cov_34lqdmjth.b[4][1]++;cov_34lqdmjth.s[30]++;return response(true);}};cov_34lqdmjth.s[31]++;module.exports={fhirR4Validation:fhirR4Validation,onePatient:onePatient,noDefaultGuid:noDefaultGuid,noSameGuid:noSameGuid};